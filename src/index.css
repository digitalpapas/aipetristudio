@import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL. */

@layer base {
  :root {
    /* Base surfaces */
    --background: 0 0% 100%; /* white */
    --background-alt: 210 17% 98%; /* #F8F9FA */
    --foreground: 0 0% 10%; /* #1A1A1A */

    --card: 0 0% 100%;
    --card-foreground: 0 0% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 10%;

    /* Brand */
    --brand-blue: 216 100% 50%; /* #0066FF */
    --brand-purple: 262 89% 66%; /* #8B5CF6 */

    --primary: var(--brand-blue);
    --primary-foreground: 0 0% 100%;

    --secondary: 210 28% 97%;
    --secondary-foreground: 0 0% 10%;

    --muted: 210 28% 97%;
    --muted-foreground: 220 9% 46%; /* #6B7280 */

    --accent: 210 28% 97%;
    --accent-foreground: 0 0% 10%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    /* Pale red for subtle warnings */
    --warning-red: 0 65% 95%;
    --warning-red-border: 0 50% 85%;
    --warning-red-text: 0 70% 50%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: var(--brand-blue);

    --radius: 0.75rem;

    /* Sidebar (kept for components that use it) */
    --sidebar-background: 0 0% 10%; /* dark base */
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: var(--brand-blue);
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 16%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 18%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Page canvas color (#f6f6f6) */
    --canvas: 0 0% 96%;

    /* Effects */
    --shadow-soft: 0 8px 30px hsl(var(--brand-blue) / 0.08);
    --shadow-glow: 0 0 0 8px hsl(var(--brand-blue) / 0.08);

    /* Typography */
    --font-sans: "Inter";
    --heading: 212 39% 26%; /* ~#283F5C */
    --sidebar-menu: 220 12% 87%; /* ~#DBDEE3 */
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --brand-blue: 216 100% 60%;
    --brand-purple: 262 89% 70%;

    --primary: var(--brand-blue);
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: var(--brand-blue);
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * { @apply border-border; }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans), ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  }
}

@layer utilities {
  .bg-gradient-primary { background-image: linear-gradient(135deg, hsl(var(--brand-blue)), hsl(var(--brand-purple))); }
  .text-gradient-primary { background-image: linear-gradient(90deg, hsl(var(--brand-blue)), hsl(var(--brand-purple))); -webkit-background-clip: text; background-clip: text; color: transparent; }
  .shadow-elevated { box-shadow: var(--shadow-soft); }
  .hover-lift { @apply transition-transform duration-200; }
  .hover-lift:hover { transform: translateY(-2px); }
  .pulse { animation: pulse 2s cubic-bezier(0.4,0,0.6,1) infinite; }
  .font-work { font-family: 'Work Sans', var(--font-sans), ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial; }
  
  /* Selection and bookmark styles */
  .select-text { user-select: text; }
  .selection-popup { animation: fadeIn 0.2s ease-in-out; }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translate(-50%, -90%);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -100%);
    }
  }

  /* Animation delays for loading dots */
  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }
}

@layer utilities {
  /* Мобильные отступы */
  .mobile-safe-area {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* Скрытие скроллбара на мобильных */
  @media (max-width: 768px) {
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
  }
  
  /* Адаптивные размеры текста */
  .text-responsive {
    @apply text-sm sm:text-base;
  }
  
  /* Предотвращение горизонтального скролла */
  .overflow-x-safe {
    @apply overflow-x-hidden;
    overflow-wrap: break-word; /* Безопасный перенос только при необходимости */
  }
  
  /* Правильный перенос заголовков в мобильной версии */
  .title-mobile-safe {
    word-break: keep-all; /* Не ломать слова */
    overflow-wrap: break-word; /* Переносить только очень длинные слова */
    hyphens: auto; /* Автоматические переносы */
  }
  
  /* Мобильная безопасная область */
  .mobile-safe-area {
    word-break: normal; /* Нормальные переносы */
    overflow-wrap: break-word;
  }
}
